<!DOCTYPE html>
<html lang="ru">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>SQL ORDER BY - Сортировка результатов</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
	<style>
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
			font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
		}

		body {
			background: linear-gradient(135deg, #1a237e 0%, #4a148c 100%);
			color: #fff;
			min-height: 100vh;
			padding: 20px;
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
		}

		.container {
			width: 100%;
			max-width: 500px;
			background: rgba(255, 255, 255, 0.1);
			backdrop-filter: blur(10px);
			border-radius: 20px;
			padding: 30px;
			box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
			border: 1px solid rgba(255, 255, 255, 0.1);
			margin-bottom: 30px;
		}

		.header {
			text-align: center;
			margin-bottom: 30px;
		}

		.header h1 {
			font-size: 28px;
			margin-bottom: 10px;
			background: linear-gradient(to right, #ff4081, #f50057);
			-webkit-background-clip: text;
			background-clip: text;
			color: transparent;
		}

		.header p {
			font-size: 16px;
			opacity: 0.9;
			line-height: 1.5;
		}

		.sql-container {
			background: #0d1b2a;
			border-radius: 12px;
			padding: 20px;
			margin-bottom: 25px;
			border-left: 5px solid #f50057;
			position: relative;
			overflow-x: auto;
		}

		.sql-title {
			display: flex;
			align-items: center;
			margin-bottom: 15px;
			color: #ff4081;
			font-size: 18px;
		}

		.sql-title i {
			margin-right: 10px;
			font-size: 20px;
		}

		.sql-code {
			font-family: 'Courier New', monospace;
			font-size: 16px;
			line-height: 1.8;
			color: #e0e0e0;
			white-space: pre-wrap;
			overflow-wrap: break-word;
		}

		.keyword {
			color: #ff79c6;
			font-weight: bold;
		}

		.alias {
			color: #8be9fd;
			font-style: italic;
		}

		.column {
			color: #50fa7b;
		}

		.table {
			color: #f1fa8c;
		}

		.sort-clause {
			color: #ffb74d;
			font-weight: bold;
		}

		.function {
			color: #ce93d8;
		}

		.explanation {
			background: rgba(255, 255, 255, 0.08);
			border-radius: 12px;
			padding: 20px;
			margin-top: 15px;
		}

		.explanation h3 {
			color: #ff4081;
			margin-bottom: 15px;
			font-size: 20px;
			display: flex;
			align-items: center;
		}

		.explanation h3 i {
			margin-right: 10px;
		}

		.explanation p {
			line-height: 1.6;
			margin-bottom: 10px;
		}

		.order-types {
			display: flex;
			flex-wrap: wrap;
			gap: 10px;
			margin-top: 20px;
		}

		.order-type {
			flex: 1;
			min-width: 120px;
			background: rgba(255, 64, 129, 0.15);
			border-radius: 8px;
			padding: 12px;
			text-align: center;
		}

		.order-type h4 {
			color: #ff80ab;
			margin-bottom: 5px;
			font-size: 16px;
		}

		.order-type p {
			font-size: 14px;
			color: #e1bee7;
		}

		.note {
			background: rgba(245, 0, 87, 0.15);
			border-left: 4px solid #f50057;
			padding: 12px;
			margin-top: 20px;
			border-radius: 0 8px 8px 0;
		}

		.note p {
			font-size: 14px;
			color: #f8bbd0;
		}

		.result-container {
			margin-top: 25px;
			background: rgba(255, 255, 255, 0.08);
			border-radius: 12px;
			padding: 20px;
		}

		.result-title {
			color: #ff4081;
			margin-bottom: 15px;
			font-size: 20px;
			display: flex;
			align-items: center;
			justify-content: space-between;
		}

		.result-title i {
			margin-right: 10px;
		}

		.sort-controls {
			display: flex;
			gap: 10px;
		}

		.sort-btn {
			background: rgba(255, 64, 129, 0.3);
			border: none;
			color: white;
			padding: 6px 12px;
			border-radius: 6px;
			font-size: 14px;
			cursor: pointer;
			transition: background 0.3s;
		}

		.sort-btn:hover {
			background: rgba(255, 64, 129, 0.5);
		}

		.sort-btn.active {
			background: #f50057;
		}

		table {
			width: 100%;
			border-collapse: collapse;
			font-size: 15px;
		}

		th {
			background-color: rgba(245, 0, 87, 0.3);
			color: #fce4ec;
			padding: 12px 10px;
			text-align: left;
			font-weight: 600;
			cursor: pointer;
			transition: background 0.3s;
		}

		th:hover {
			background-color: rgba(245, 0, 87, 0.5);
		}

		th i {
			margin-left: 5px;
			font-size: 12px;
			opacity: 0.7;
		}

		td {
			padding: 12px 10px;
			border-bottom: 1px solid rgba(255, 255, 255, 0.1);
			color: #e0e0e0;
		}

		tr:hover {
			background-color: rgba(255, 255, 255, 0.05);
		}

		.footer {
			text-align: center;
			margin-top: 20px;
			font-size: 14px;
			opacity: 0.8;
			color: #e1bee7;
		}

		@media (max-width: 480px) {
			.container {
				padding: 20px;
			}

			.header h1 {
				font-size: 24px;
			}

			.sql-code {
				font-size: 14px;
			}

			th,
			td {
				padding: 10px 8px;
				font-size: 14px;
			}

			.order-types {
				flex-direction: column;
			}

			.sort-controls {
				flex-direction: column;
				margin-top: 10px;
			}
		}
	</style>
</head>

<body>
	<div class="container">
		<div class="header">
			<h1>ORDER BY - Сортировка результатов</h1>
			<p>Оператор ORDER BY используется для сортировки результирующего набора данных по одному или нескольким столбцам.</p>
		</div>

		<div class="sql-container">
			<div class="sql-title">
				<i class="fas fa-sort-alpha-down"></i>
				<span>SQL-запрос с сортировкой ORDER BY</span>
			</div>
			<pre class="sql-code"><span class="keyword">SELECT</span>
    FirstName <span class="keyword">AS</span> <span class="alias">[First Name]</span>,
    LastName <span class="keyword">AS</span> <span class="alias">[Last Name]</span>,
    Email <span class="keyword">AS</span> <span class="alias">[EMAIL]</span>
<span class="keyword">FROM</span>
    <span class="table">customers</span>
<span class="keyword">ORDER BY</span>
    <span class="column">LastName</span> <span class="sort-clause">ASC</span>;</pre>
		</div>

		<div class="explanation">
			<h3><i class="fas fa-lightbulb"></i> Объяснение запроса</h3>
			<p>В этом запросе используется <strong>ORDER BY LastName ASC</strong> для сортировки результатов:</p>
			<p>1. Сначала выбираются данные из таблицы <span class="table">customers</span></p>
			<p>2. Псевдонимы делают заголовки столбцов более читаемыми</p>
			<p>3. Результат сортируется по столбцу <span class="column">LastName</span> в порядке <span class="sort-clause">ASC</span> (возрастания, от A до Z)</p>

			<div class="order-types">
				<div class="order-type">
					<h4>ASC</h4>
					<p>По возрастанию (A-Z, 0-9)</p>
				</div>
				<div class="order-type">
					<h4>DESC</h4>
					<p>По убыванию (Z-A, 9-0)</p>
				</div>
				<div class="order-type">
					<h4>ORDER BY 2</h4>
					<p>Сортировка по номеру столбца</p>
				</div>
				<div class="order-type">
					<h4>Множественная</h4>
					<p>ORDER BY LastName, FirstName</p>
				</div>
			</div>

			<div class="note">
				<p><i class="fas fa-info-circle"></i> <strong>Примечание:</strong> Если не указать ASC или DESC, по умолчанию применяется сортировка по возрастанию (ASC). ORDER BY всегда идет после всех других предложений SELECT.</p>
			</div>
		</div>

		<div class="result-container">
			<div class="result-title">
				<div>
					<i class="fas fa-table"></i>
					<span>Результат с сортировкой по LastName</span>
				</div>
				<div class="sort-controls">
					<button class="sort-btn active" data-sort="lastname-asc">Фамилия ↑</button>
					<button class="sort-btn" data-sort="lastname-desc">Фамилия ↓</button>
					<button class="sort-btn" data-sort="firstname">Имя</button>
				</div>
			</div>
			<table id="customers-table">
				<thead>
					<tr>
						<th data-sort="firstname">First Name <i class="fas fa-sort"></i></th>
						<th data-sort="lastname" class="sorted-asc">Last Name <i class="fas fa-sort-up"></i></th>
						<th data-sort="email">EMAIL <i class="fas fa-sort"></i></th>
					</tr>
				</thead>
				<tbody id="customers-data">
					<!-- Данные будут вставлены через JavaScript -->
				</tbody>
			</table>
		</div>
	</div>

	<script>
		// Данные для таблицы
		const customers = [{
				firstName: "John",
				lastName: "Doe",
				email: "john.doe@email.com"
			},
			{
				firstName: "Jane",
				lastName: "Smith",
				email: "jane.smith@email.com"
			},
			{
				firstName: "Alex",
				lastName: "Johnson",
				email: "alex.j@email.com"
			},
			{
				firstName: "Maria",
				lastName: "Garcia",
				email: "maria.g@email.com"
			},
			{
				firstName: "Robert",
				lastName: "Brown",
				email: "robert.b@email.com"
			},
			{
				firstName: "Sarah",
				lastName: "Williams",
				email: "sarah.w@email.com"
			},
			{
				firstName: "Michael",
				lastName: "Davis",
				email: "michael.d@email.com"
			},
			{
				firstName: "Emily",
				lastName: "Anderson",
				email: "emily.a@email.com"
			}
		];

		// Функция для отрисовки таблицы
		function renderTable(data) {
			const tbody = document.getElementById('customers-data');
			tbody.innerHTML = '';

			data.forEach(customer => {
				const row = document.createElement('tr');
				row.innerHTML = `
                    <td>${customer.firstName}</td>
                    <td>${customer.lastName}</td>
                    <td>${customer.email}</td>
                `;
				tbody.appendChild(row);
			});
		}

		// Изначальная сортировка по LastName ASC
		let currentSort = {
			field: 'lastname',
			order: 'asc'
		};

		// Функция сортировки данных
		function sortData(field, order = 'asc') {
			return [...customers].sort((a, b) => {
				let aValue, bValue;

				if (field === 'firstname') {
					aValue = a.firstName.toLowerCase();
					bValue = b.firstName.toLowerCase();
				} else if (field === 'lastname') {
					aValue = a.lastName.toLowerCase();
					bValue = b.lastName.toLowerCase();
				} else if (field === 'email') {
					aValue = a.email.toLowerCase();
					bValue = b.email.toLowerCase();
				}

				if (order === 'asc') {
					return aValue.localeCompare(bValue);
				} else {
					return bValue.localeCompare(aValue);
				}
			});
		}

		// Инициализация таблицы
		function initTable() {
			const sortedData = sortData('lastname', 'asc');
			renderTable(sortedData);

			// Добавляем обработчики для кнопок сортировки
			document.querySelectorAll('.sort-btn').forEach(button => {
				button.addEventListener('click', function() {
					// Убираем активный класс со всех кнопок
					document.querySelectorAll('.sort-btn').forEach(btn => {
						btn.classList.remove('active');
					});

					// Добавляем активный класс текущей кнопке
					this.classList.add('active');

					// Получаем тип сортировки из data-атрибута
					const sortType = this.dataset.sort;

					// Обновляем иконки сортировки в заголовках
					document.querySelectorAll('th i').forEach(icon => {
						icon.className = 'fas fa-sort';
					});

					// Сортируем данные
					let sortedData;
					if (sortType === 'lastname-asc') {
						sortedData = sortData('lastname', 'asc');
						document.querySelector('th[data-sort="lastname"] i').className = 'fas fa-sort-up';
						currentSort = {
							field: 'lastname',
							order: 'asc'
						};
					} else if (sortType === 'lastname-desc') {
						sortedData = sortData('lastname', 'desc');
						document.querySelector('th[data-sort="lastname"] i').className = 'fas fa-sort-down';
						currentSort = {
							field: 'lastname',
							order: 'desc'
						};
					} else if (sortType === 'firstname') {
						sortedData = sortData('firstname', 'asc');
						document.querySelector('th[data-sort="firstname"] i').className = 'fas fa-sort-up';
						currentSort = {
							field: 'firstname',
							order: 'asc'
						};
					}

					renderTable(sortedData);
				});
			});

			// Добавляем обработчики для сортировки по клику на заголовки
			document.querySelectorAll('th').forEach(th => {
				th.addEventListener('click', function() {
					const field = this.dataset.sort;
					let order = 'asc';

					// Если уже сортируется по этому полю, меняем порядок
					if (currentSort.field === field) {
						order = currentSort.order === 'asc' ? 'desc' : 'asc';
					}

					// Обновляем кнопки
					document.querySelectorAll('.sort-btn').forEach(btn => {
						btn.classList.remove('active');
						if (field === 'lastname') {
							if (order === 'asc' && btn.dataset.sort === 'lastname-asc') {
								btn.classList.add('active');
							} else if (order === 'desc' && btn.dataset.sort === 'lastname-desc') {
								btn.classList.add('active');
							}
						} else if (field === 'firstname' && btn.dataset.sort === 'firstname') {
							btn.classList.add('active');
						}
					});

					// Сортируем данные
					const sortedData = sortData(field, order);
					renderTable(sortedData);

					// Обновляем иконки
					document.querySelectorAll('th i').forEach(icon => {
						icon.className = 'fas fa-sort';
					});

					if (order === 'asc') {
						this.querySelector('i').className = 'fas fa-sort-up';
					} else {
						this.querySelector('i').className = 'fas fa-sort-down';
					}

					currentSort = {
						field,
						order
					};
				});
			});
		}

		// Анимация при клике на SQL код
		document.querySelector('.sql-code').addEventListener('click', function() {
			this.style.transform = 'scale(1.02)';
			this.style.transition = 'transform 0.3s ease';
			setTimeout(() => {
				this.style.transform = 'scale(1)';
			}, 300);
		});

		// Инициализация при загрузке страницы
		document.addEventListener('DOMContentLoaded', initTable);
	</script>
</body></html>