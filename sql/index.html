SQL

Базовая теория

Реляционная база данных - это конструкция базы данных
Каждая таблица в реляционной базе данных должна содержать первичный ключ
Роль базы данных — упростить взаимодействие, организацию и анализ связанных данных из различных источников
Первичный ключ — это уникальный идентификатор записи в таблице, должен быть уникальным и не должен быть нулевым (пустым)
Внешний ключ — это поле в таблице, значение которого соответствует первичному ключу в другой таблице
В связи «один-ко-многим» стандартный первичный ключ находится на сторого не «один»

Типы данных
Числовые
True False
Строковые
Дата и время

Операторы
SELECT

***SQL server
SELECT TOP 10 *
FROM 
	products;
	
***MySQL
SELECT *
FROM
	products
LIMIT 10

Запрос это набор команд который возвращает информацию в виде записей

Комментарии 
/*
CREATED BY: Уолтер Шилдс
CREATED ON: 13.03.2018
DESCRIPTION: Данный запрос осуществляет выборку полей имени, фамилии,
электронной почты и номера телефона из таблицы customers (клиенты)
и демонстрирует четыре различных способа использования псевдонима.
*/

Запрос
SELECT
FirstName AS 'First Name',
LastName AS [Last Name],
Email AS EMAIL
Phone CELL
FROM
customers
	
'First Name' [Last Name] - псевдонимы

Запрос с лимитом
SELECT
FirstName AS [First Name],
LastName AS [Last Name],
Email AS [EMAIL]
FROM
customers
ORDER BY
FirstName ASC,
LastName DESC
LIMIT 10

= Равно
> Больше, чем
< Меньше, чем
>= Больше или равно
<= Меньше или равно
<> Не равно

BETWEEN (Между)
IN (В)
LIKE (Как)
AND (И)
OR (Или)

+ Сложение
- Вычитание
/ Деление
* Умножение
% Остаток от деления


SELECT
Total AS [Original Amount],
Total + 10 AS [Addition Operator],
Total - 10 AS [Subtraction Operator],
Total / 10 AS [Division Operator],
Total * 10 AS [Multiplication Operator],
Total % 10 AS [Modulo Operator]
FROM
invoices
ORDER BY
Total DESC

Если бы нам понадобилось узнать количество клиентов, которые приобрели
всего две песни по $0,99, мы бы отобразили в таблице invoices запись на общую
сумму $1,98 — за две песни

SELECT
InvoiceDate,
BillingAddress,
BillingCity,
Total
FROM
invoices
WHERE
Total = 1.98
ORDER BY
InvoiceDate


счета, находящиеся в диапазоне от $1,98 до $5,00

SELECT
InvoiceDate,
BillingAddress,
BillingCity,
Total
FROM
invoices
WHERE
Total BETWEEN 1.98 AND 5.00
ORDER BY
InvoiceDate


суммы счетов-фактур, равные $1,98 или $3,96 (рис. 47).
SELECT
InvoiceDate,
BillingAddress,
BillingCity,
Total
FROM
invoices
WHERE
Total IN (1.98, 3.96)
ORDER BY
InvoiceDate
возвращает все счета, выставленные в городе Тусон:
SELECT
InvoiceDate,
BillingAddress,
BillingCity,
Total
FROM
invoices
WHERE
BillingCity = 'Tucson'
ORDER BY
Total
ELECT
InvoiceDate,
BillingAddress,
BillingCity,
Total
FROM
invoices
WHERE
BillingCity IN ('Tucson', 'Paris', 'London')
ORDER BY
Total
запрос ищет любые счета, выставленные в городах на букву T. В результат теперь попали Торонто и Тусон.
SELECT
InvoiceDate,
BillingAddress,
BillingCity,
Total
FROM
invoices
WHERE
BillingCity LIKE 'T%'
ORDER BY
Total
% перед буквой T изменит условие поиска на
поиск счета, выставленного в городе, название которого содержит букву T.
SELECT
InvoiceDate,
BillingAddress,
BillingCity,
Total
FROM
invoices
HERE
BillingCity LIKE '%T%'
ORDER BY
Total
ключевое слово
NOT перед оператором LIKE, и вы сможете исключить записи из результата запроса.
SELECT
InvoiceDate,
BillingAddress,
BillingCity,
Total
FROM
invoices
WHERE
BillingCity NOT LIKE '%T%'
ORDER BY
Total
'T%'
Находит все записи,
начинающиеся сбуквы T
'%T' Находит все записи,
заканчивающиеся буквой T
'%T%' Находит все записи, содержащие
встроке букву T
'T%T' Находит все записи, начинающиеся
изаканчивающиеся буквой T
SELECT
InvoiceDate,
BillingAddress,
BillingCity,
Total
FROM
invoices
WHERE
InvoiceDate = '2009-01-03 00:00:00'
ORDER BY
Total
Функция DATE()позволяет исключить время при указании
параметров даты.
SELECT
InvoiceDate,
BillingAddress,
BillingCity,
Total
FROM
Invoices
WHERE
DATE(InvoiceDate) = '2009-01-03'
ORDER BY
Total
SELECT
InvoiceDate,
BillingAddress,
BillingCity,
Total
FROM
invoices
WHERE
DATE(InvoiceDate) > '2010-01-02' AND Total < 3
ORDER BY
Total
SELECT
InvoiceDate,
BillingAddress,
BillingCity,
Total
FROM
invoices
WHERE
BillingCity LIKE 'p%' OR BillingCity LIKE 'd%'
ORDER BY
Total
ELECT
InvoiceDate,
BillingAddress,
BillingCity,
Total
FROM
invoices
WHERE
Total > 1.98 AND (BillingCity LIKE 'p%' OR
BillingCity LIKE 'd%')
ORDER BY
Total
SELECT
InvoiceDate,
BillingAddress,
BillingCity,
Total,
CASE
WHEN TOTAL < 2.00 THEN 'Baseline Purchase'
WHEN TOTAL BETWEEN 2.00 AND 6.99 THEN 'Low
Purchase'
WHEN TOTAL BETWEEN 7.00 AND 15.00 THEN 'Target
Purchase'
ELSE 'Top Performers'
END AS PurchaseType
FROM
invoices
ORDER BY
BillingCity
SELECT
InvoiceDate,
BillingAddress,
BillingCity,
Total,
CASE
WHEN TOTAL < 2.00 THEN 'Baseline Purchase'
WHEN TOTAL BETWEEN 2.00 AND 6.99 THEN 'Low
Purchase'
WHEN TOTAL BETWEEN 7.00 AND 15.00 THEN 'Target
Purchase'
ELSE 'Top Performers'
END AS PurchaseType
FROM
invoices
WHERE PurchaseType = 'Top Performers'
ORDER BY
BillingCity
Рассмотрим пример использования операции соединения JOIN, объединяющей
эти таблицы.
SELECT
*
FROM
invoices
INNER JOIN
customers
ON
invoices.CustomerId = customers.CustomerId
SELECT
*
FROM
invoices
INNER JOIN
customers
ON
invoices.CustomerId = customers.CustomerId
----------------------------------------------
SELECT
*
FROM
invoices AS i
INNER JOIN
customers AS c
ON
i.CustomerId = c.CustomerId




