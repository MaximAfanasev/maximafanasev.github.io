<!DOCTYPE html>
<html lang="ru">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>–£–≥–∞–¥–∞–π HTTP —Å—Ç–∞—Ç—É—Å</title>
    <link rel="stylesheet" href="css.css">
</head>

<body>
	<div class="container">
		<h1>üéÆ –£–≥–∞–¥–∞–π HTTP —Å—Ç–∞—Ç—É—Å</h1>

		<div class="game-info">
			<div class="score">–°—á–µ—Ç: <span id="score">0</span></div>
			<div class="question-count">–í–æ–ø—Ä–æ—Å: <span id="question-number">1</span>/<span id="total-questions">4</span></div>
		</div>

		<div class="status-card">
			<div class="question" id="question">–ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç —Å—Ç–∞—Ç—É—Å 200?</div>

			<div class="options" id="options">
				<!-- –í–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
			</div>
		</div>

		<div class="controls">
			<button id="next-btn">–°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å</button>
		</div>

		<div class="result" id="result"></div>
		<div class="score-display" id="final-score"></div>
		<a href="3.html">LVL 4</a>

	</div>

	<script>
		const httpStatuses = [{
				"code": "400 Bad Request",
				"description": "–û—à–∏–±–∫–∞ –≤ –∑–∞–ø—Ä–æ—Å–µ"
			}, {
				"code": "401 Unauthorized",
				"description": "–¢—Ä–µ–±—É–µ—Ç—Å—è –≤—Ö–æ–¥"
			}, {
				"code": "403 Forbidden",
				"description": "–ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞"
			}, {
				"code": "404 Not Found",
				"description": "–ù–µ –Ω–∞–π–¥–µ–Ω–æ"
			},

		];

		// –≠–ª–µ–º–µ–Ω—Ç—ã DOM
		const questionElement = document.getElementById('question');
		const optionsElement = document.getElementById('options');
		const nextButton = document.getElementById('next-btn');
		const resultElement = document.getElementById('result');
		const scoreElement = document.getElementById('score');
		const questionNumberElement = document.getElementById('question-number');
		const totalQuestionsElement = document.getElementById('total-questions');
		const finalScoreElement = document.getElementById('final-score');

		// –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–≥—Ä—ã
		let currentQuestionIndex = 0;
		let score = 0;
		let questions = [];
		let gameFinished = false;

		// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
		function initGame() {
			// –°–æ–∑–¥–∞–µ–º –≤–æ–ø—Ä–æ—Å—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—Ç–∞—Ç—É—Å–æ–≤
			questions = httpStatuses.map(status => {
				// –°–æ–∑–¥–∞–µ–º –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤
				const incorrectOptions = httpStatuses
					.filter(s => s.code !== status.code)
					.map(s => s.description)
					.sort(() => Math.random() - 0.5)
					.slice(0, 3);

				// –í—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤
				const options = [status.description, ...incorrectOptions];

				// –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º –≤–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤
				for (let i = options.length - 1; i > 0; i--) {
					const j = Math.floor(Math.random() * (i + 1));
					[options[i], options[j]] = [options[j], options[i]];
				}

				return {
					question: `–ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç —Å—Ç–∞—Ç—É—Å ${status.code}?`,
					options: options,
					answer: status.description
				};
			});

			// –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º –≤–æ–ø—Ä–æ—Å—ã
			questions.sort(() => Math.random() - 0.5);

			totalQuestionsElement.textContent = questions.length;
			showQuestion();
		}

		// –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â–∏–π –≤–æ–ø—Ä–æ—Å
		function showQuestion() {
			if (currentQuestionIndex >= questions.length) {
				endGame();
				return;
			}

			const currentQuestion = questions[currentQuestionIndex];
			questionElement.textContent = currentQuestion.question;
			questionNumberElement.textContent = currentQuestionIndex + 1;

			// –û—á–∏—â–∞–µ–º –≤–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤
			optionsElement.innerHTML = '';

			// –î–æ–±–∞–≤–ª—è–µ–º –≤–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤
			currentQuestion.options.forEach(option => {
				const button = document.createElement('div');
				button.className = 'option';
				button.textContent = option;
				button.addEventListener('click', () => selectAnswer(option, button));
				optionsElement.appendChild(button);
			});

			// –°–∫—Ä—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
			resultElement.textContent = '';
			finalScoreElement.textContent = '';
			nextButton.style.display = 'none';
		}

		// –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ –æ—Ç–≤–µ—Ç–∞
		function selectAnswer(selectedOption, buttonElement) {
			if (gameFinished) return;

			const currentQuestion = questions[currentQuestionIndex];
			const options = document.querySelectorAll('.option');

			// –û—Ç–∫–ª—é—á–∞–µ–º –≤—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤
			options.forEach(option => {
				option.style.pointerEvents = 'none';
			});

			// –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ—Ç–≤–µ—Ç
			if (selectedOption === currentQuestion.answer) {
				buttonElement.classList.add('correct');
				resultElement.textContent = '‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ!';
				resultElement.style.color = '#28a745';
				score++;
				scoreElement.textContent = score;
			} else {
				buttonElement.classList.add('incorrect');
				resultElement.textContent = '‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ!';
				resultElement.style.color = '#dc3545';

				// –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
				options.forEach(option => {
					if (option.textContent === currentQuestion.answer) {
						option.classList.add('correct');
					}
				});
			}

			nextButton.style.display = 'block';
			currentQuestionIndex++;
		}

		// –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏–≥—Ä—ã
		function endGame() {
			gameFinished = true;
			questionElement.textContent = '–ò–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!';
			optionsElement.innerHTML = '';
			resultElement.textContent = '';
			nextButton.style.display = 'none';

			const percentage = Math.round((score / questions.length) * 100);
			let message;

			if (percentage === 100) {
				message = 'üéâ –ò–¥–µ–∞–ª—å–Ω–æ! –í—ã –Ω–∞—Å—Ç–æ—è—â–∏–π —ç–∫—Å–ø–µ—Ä—Ç –ø–æ HTTP —Å—Ç–∞—Ç—É—Å–∞–º!';
			} else if (percentage >= 70) {
				message = 'üëç –û—Ç–ª–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç! –í—ã —Ö–æ—Ä–æ—à–æ –∑–Ω–∞–µ—Ç–µ HTTP —Å—Ç–∞—Ç—É—Å—ã!';
			} else if (percentage >= 50) {
				message = 'üòä –ù–µ–ø–ª–æ—Ö–æ, –Ω–æ –µ—Å—Ç—å –∫—É–¥–∞ —Å—Ç—Ä–µ–º–∏—Ç—å—Å—è!';
			} else {
				message = 'üëé –°—Ç–æ–∏—Ç –ø–æ–≤—Ç–æ—Ä–∏—Ç—å HTTP —Å—Ç–∞—Ç—É—Å—ã –µ—â–µ —Ä–∞–∑!';
			}

			finalScoreElement.innerHTML = `
                –í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ${score} –∏–∑ ${questions.length}<br>
                ${message}
            `;

			// –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –¥–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –∏–≥—Ä—ã
			const restartButton = document.createElement('button');
			restartButton.textContent = '–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞';
			restartButton.addEventListener('click', restartGame);
			finalScoreElement.appendChild(restartButton);
		}

		// –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∏–≥—Ä—ã
		function restartGame() {
			currentQuestionIndex = 0;
			score = 0;
			gameFinished = false;
			scoreElement.textContent = score;
			finalScoreElement.textContent = '';
			initGame();
		}

		// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å"
		nextButton.addEventListener('click', showQuestion);

		// –ó–∞–ø—É—Å–∫–∞–µ–º –∏–≥—Ä—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
		initGame();
	</script>
</body></html>