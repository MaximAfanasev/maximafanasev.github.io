<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link type="image/x-icon" rel="icon" href="../../img/flag.png">
	<title>죄송합니다</title>
	<link rel="stylesheet" href="../../css/p.css">
	<style>
	.input-box {
		width: 250px;}
	</style>
</head>

<body>
	<div class="container">
		<div class="inputs-container">
			<input type="text" class="input-box">
		</div>
		<span>чуесонамнида</span>
	</div>

	<script>
		const targetCharacters = ['죄송합니다'];
        let isResetting = false; // Флаг для предотвращения ввода во время сброса
        
        document.addEventListener('DOMContentLoaded', function () {
            // Получаем элементы
            const inputBox = document.querySelector('.input-box');

            // Функция для очистки и сброса инпутов
            function resetInput() {
                isResetting = true;
                inputBox.value = '';
                inputBox.classList.remove('correct', 'incorrect');
                inputBox.disabled = false;
                
                // Фокус на инпут
                setTimeout(() => {
                    inputBox.focus();
                    isResetting = false;
                }, 50);
            }

            // Функция для проверки ввода
            function checkInput() {
                if (isResetting) return;
                
                const value = inputBox.value;
                
                // Очищаем предыдущие классы
                inputBox.classList.remove('correct', 'incorrect');

                if (value === '') {
                    return;
                } else if (value === targetCharacters[0]) {
                    // Правильный ввод
										window.location.href = "7.html"
                    
                    // Ждем 1 секунду, затем очищаем инпут
                    setTimeout(() => {
                        resetInput();
                    }, 1000);
                } else {
                    // Проверяем частичное совпадение
                    if (targetCharacters[0].startsWith(value)) {
                        // Частичное совпадение - нейтральное состояние
                        inputBox.classList.remove('correct', 'incorrect');
                    } else {
                        // Неправильный ввод
                    }
                }
            }

            // Обработчики событий для инпута
            inputBox.addEventListener('input', function (e) {
                if (isResetting) {
                    e.preventDefault();
                    return;
                }
                checkInput();
            });

            // При вставке текста (paste)
            inputBox.addEventListener('paste', function (e) {
                if (isResetting) {
                    e.preventDefault();
                    return;
                }
                
                e.preventDefault();
                const pastedText = (e.clipboardData || window.clipboardData).getData('text');
                inputBox.value = pastedText;
                checkInput();
            });

            // При нажатии клавиш
            inputBox.addEventListener('keydown', function (e) {
                if (isResetting) {
                    e.preventDefault();
                    return;
                }
                
                // Очистка по Ctrl+Enter
                if (e.key === 'Enter' && e.ctrlKey) {
                    e.preventDefault();
                    resetInput();
                }
            });

            // Автофокус на инпут при загрузке
            setTimeout(() => {
                inputBox.focus();
            }, 100);
        });
	</script>
</body></html>